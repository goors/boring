{% extends "TwigBundle::layout.html.twig" %}



{% block title 'Latest gifts' %}

{% block body %}
    

    <div class="sf-reset holder">
        
        <div >

            <div class="personal_data" ng-controller="Sendgiftto">
                <h1>{{ user.firstname }} {{ user.lastname }}</h1>
                <br />Total gifts: <b>{{totalgifts}}</b><br />
                Most popular in: <b>{{mostpopular|date("F Y")}}.</b><br />
                Best gifts <b>{{bestgift}} - {{best_gifts_total}} times</b>
                <br /><br />
                <a href="javascript: void(0)" ng-click="save({{user.id}})" class="block button  input_block custom_send" style="">Send new gift</a>
            </div>
            <div class="gift_data" ng-controller="Markasread">
                {% for usergift in all_user_gifts %}
                    <div class="sum">
                        <div class="circle">
                            <span>
                            {{usergift.gift.name}}
                            </span>
                            
                               
                        </div>
                        <div class="sender_data">
                            {% if usergift.new %} 
                                <span id="span_{{ usergift.id }}">
                                <font style="color:white; background-color: red; font-size: 10px; padding: 3px;">new</font> 
                                <a  href="javascript: void(0)" style="padding: 3px;font-size:11px; color:white; background-color: #ccc;" ng-click="updateModel('/markasread/{{ usergift.id }}',{{ usergift.id }})">Mark as read</a><br><br>
                                </span>
                            {% endif %}
                                
                            {{usergift.sentby.firstname}} <br />
                            {{usergift.sentdate|date("d F  Y")}} <br /><br />
                            Message: <br />
                            {{usergift.comment}} 
                            
                        </div>    
                    </div>
                {% endfor %}
            </div>
            <div style="clear: both;"></div>
        </div>
    </div>
{% endblock %}
